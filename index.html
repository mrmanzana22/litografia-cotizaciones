<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotización - Litografía FULLEMPAQUES</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* LAYOUT DE 2 COLUMNAS */
        .main-container {
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 500px;
            gap: 30px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }
        
        /* VISTA PREVIA */
        .preview-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
            color: white;
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .preview-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .preview-row {
            margin-bottom: 18px;
            padding-bottom: 18px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .preview-row:last-of-type {
            border-bottom: none;
        }
        
        .preview-label {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .preview-value {
            font-size: 18px;
            font-weight: 600;
        }
        
        .price-section {
            margin-top: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .price-label {
            font-size: 16px;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .price-value {
            font-size: 42px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .breakdown {
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 14px;
        }
        
        .breakdown-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            opacity: 0.9;
        }
        
        .status {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.8;
        }
        
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            .preview-container {
                position: relative;
                top: 0;
            }
        }
        
        /* RESTO DEL CSS ORIGINAL */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #2d3748;
            font-size: 32px;
            margin-bottom: 8px;
        }
        .header p {
            color: #718096;
            font-size: 15px;
        }
        .section {
            margin-bottom: 35px;
            padding: 25px;
            background: #f7fafc;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .section-icon {
            margin-right: 10px;
            font-size: 22px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            font-family: inherit;
            background: white;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        .success-message, .error-banner {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: none;
            text-align: center;
            font-weight: 600;
        }
        .success-message {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }
        .error-banner {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        .spinner {
            border: 5px solid #f3f4f6;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loading-text {
            color: #667eea;
            font-weight: 700;
            font-size: 18px;
        }
        .custom-field {
            display: none;
            margin-top: 12px;
        }
        .info-box {
            background: #edf2f7;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            color: #4a5568;
            margin-top: 8px;
            border-left: 3px solid #667eea;
        }
        .warning-box {
            background: #fff5f5;
            border-left: 3px solid #fc8181;
            color: #c53030;
        }
        .troquel-info {
            background: #e6fffa;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 3px solid #38b2ac;
            display: none;
        }
        .troquel-info-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 13px;
        }
        .required {
            color: #e53e3e;
        }
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .checkbox-item:hover {
            border-color: #667eea;
            background: #f7fafc;
        }
        .checkbox-item input {
            width: auto;
            margin-right: 8px;
        }
        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 500;
        }
        @media (max-width: 700px) {
            .form-row { grid-template-columns: 1fr; }
            .container { padding: 24px; }
            .header h1 { font-size: 24px; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- FORMULARIO PRINCIPAL -->
        <div class="container">
            <div class="header">
                <h1>📦 Sistema de Cotizaciones</h1>
                <p>FULLEMPAQUES S.A.S - Litografía Profesional</p>
            </div>

            <div class="success-message" id="successMessage">
                ✅ ¡Cotización generada exitosamente!<br>
                El PDF ha sido enviado por Telegram.
            </div>

            <div class="error-banner" id="errorBanner"></div>

            <form id="cotizacionForm">
                <!-- SECCIÓN 1: VENDEDOR Y CLIENTE -->
                <div class="section">
                    <div class="section-title">
                        <span class="section-icon">👤</span>
                        Vendedor y Cliente
                    </div>

                    <div class="form-group">
                        <label for="vendedor">Vendedor <span class="required">*</span></label>
                        <select id="vendedor" required>
                            <option value="">Selecciona vendedor</option>
                            <option value="JOHANNA QUINTERO">JOHANNA QUINTERO</option>
                            <option value="KATHERINE GOMEZ">KATHERINE GOMEZ</option>
                            <option value="JOSE MORENO">JOSE MORENO</option>
                            <option value="JEISSON TOVAR">JEISSON TOVAR</option>
                            <option value="DANIEL ACEVEDO">DANIEL ACEVEDO</option>
                            <option value="CESAR BLANCO">CESAR BLANCO</option>
                            <option value="ELKIN GARCIA">ELKIN GARCIA</option>
                            <option value="RONALD WATEXIKE">RONALD WATEXIKE</option>
                            <option value="LUIS ESPINOSA">LUIS ESPINOSA</option>
                            <option value="ANAITYS HENAO">ANAITYS HENAO</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="cliente_tipo">Cliente <span class="required">*</span></label>
                        <select id="cliente_tipo" required>
                            <option value="">¿Frecuente o nuevo?</option>
                            <option value="frecuente">Cliente Frecuente</option>
                            <option value="nuevo">Cliente Nuevo</option>
                        </select>
                    </div>

                    <div class="form-group custom-field" id="clienteFrecuenteField">
                        <select id="cliente_frecuente">
                            <option value="">Selecciona cliente</option>
                            <option value="LUIS RANGEL - CHAMPIONS PIZZA">LUIS RANGEL - CHAMPIONS PIZZA (Desc. 5%)</option>
                            <option value="ANDRES BELTRAN KEN CHICKEN">ANDRES BELTRAN KEN CHICKEN</option>
                            <option value="JESUS NAVARRO LABORATORIO">JESUS NAVARRO LABORATORIO (Desc. 10%)</option>
                            <option value="WALLACE BITES SAS">WALLACE BITES SAS (Desc. 5%)</option>
                            <option value="GRUPO FADEL">GRUPO FADEL (Desc. 15%)</option>
                            <option value="RAQUEL HERRERA PAEZ">RAQUEL HERRERA PAEZ</option>
                            <option value="BRIAN ALEXANDER SALAZAR">BRIAN ALEXANDER SALAZAR</option>
                            <option value="LUZ ELENA JULIO FIGUEROA">LUZ ELENA JULIO FIGUEROA</option>
                        </select>
                    </div>

                    <div class="form-group custom-field" id="clienteNuevoField">
                        <input type="text" id="cliente_nuevo" placeholder="Nombre del cliente nuevo">
                    </div>
                </div>

                <!-- SECCIÓN 2: PRODUCTO -->
                <div class="section">
                    <div class="section-title">
                        <span class="section-icon">📦</span>
                        Tipo de Producto
                    </div>

                    <div class="form-group">
                        <label for="tipo_producto">Tipo <span class="required">*</span></label>
                        <select id="tipo_producto" required>
                            <option value="">Selecciona tipo de producto</option>
                            <option value="BOLSA">🛍️ BOLSA (con cinta) - 13 opciones</option>
                            <option value="CAJA_SIN_PEGA">📦 CAJA (sin pegado) - 133 opciones</option>
                            <option value="CAJA_CON_PEGAS">🔢 CAJA CON PEGAS - 49 opciones</option>
                            <option value="STICKER">🏷️ STICKER / ETIQUETA - 3 opciones</option>
                        </select>
                        <div class="info-box" style="margin-top: 10px; display: none;" id="tipoPegasInfo">
                            ℹ️ El sistema detecta automáticamente cuántas pegas tiene cada caja
                        </div>
                    </div>

                    <div class="form-group custom-field" id="medidasField">
                        <label for="medidas">Medidas <span class="required">*</span></label>
                        <select id="medidas" disabled>
                            <option value="">Selecciona primero el tipo</option>
                        </select>
                    </div>

                    <div class="troquel-info" id="productoInfo">
                        <div class="troquel-info-item">
                            <strong>Código:</strong>
                            <span id="info_codigo">-</span>
                        </div>
                        <div class="troquel-info-item" id="infoPegasRow" style="display: none;">
                            <strong>Cantidad de Pegas:</strong>
                            <span id="info_pegas">-</span>
                        </div>
                        <div class="troquel-info-item">
                            <strong>Cabida por pliego:</strong>
                            <span id="info_cabida">-</span>
                        </div>
                    </div>

                    <div class="form-group custom-field" id="medidasCustomField">
                        <label for="medidas_custom">✏️ Medida Personalizada</label>
                        <input type="text" id="medidas_custom" placeholder="Ej: 25 X 15 X 30">
                        <div class="info-box warning-box">
                            ⚠️ Requiere troquel nuevo (+$150.000)
                        </div>
                    </div>
                </div>

                <!-- SECCIÓN 3: CANTIDAD Y MATERIAL -->
                <div class="section">
                    <div class="section-title">
                        <span class="section-icon">🔢</span>
                        Cantidad y Material
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="cantidad_predefinida">Cantidad <span class="required">*</span></label>
                            <select id="cantidad_predefinida" required>
                                <option value="">Selecciona cantidad</option>
                                <option value="100">100 unidades (Mínimo)</option>
                                <option value="500">500 unidades ⭐</option>
                                <option value="1000">1,000 unidades</option>
                                <option value="2000">2,000 unidades</option>
                                <option value="5000">5,000 unidades (-5%)</option>
                                <option value="10000">10,000 unidades (-10%)</option>
                                <option value="50000">50,000 unidades (-15%)</option>
                                <option value="custom">✏️ Otra cantidad</option>
                            </select>
                        </div>

                        <div class="form-group custom-field" id="cantidadCustomField">
                            <label for="cantidad_custom">Cantidad personalizada</label>
                            <input type="number" id="cantidad_custom" min="100" placeholder="750">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="material">Material <span class="required">*</span></label>
                        <select id="material" required>
                            <option value="">Selecciona material</option>
                            <optgroup label="Cartones Más Usados">
                                <option value="CART_BLANCO_16">Cartón Blanco Cal.16 (270gr)</option>
                                <option value="CART_BLANCO_22">Cartón Blanco Cal.22 (355gr)</option>
                                <option value="CART_KRAFT_16">Cartón Kraft Cal.16 (285gr)</option>
                            </optgroup>
                            <optgroup label="Cartones Premium">
                                <option value="ZENITH_16">ZENITH Cal.16 (270gr)</option>
                                <option value="ZENITH_20_320">ZENITH Cal.20 (320gr)</option>
                                <option value="ZENITH_20_350">ZENITH Cal.20 (350gr)</option>
                                <option value="EARTH_PACK">EARTH PACK NATURAL (315gr)</option>
                                <option value="PROPALCOTE_340">PROPALCOTE C2S (340gr)</option>
                            </optgroup>
                            <optgroup label="Papeles (Bobinas)">
                                <option value="KRAFT_NAT_90">Kraft Natural 90gr</option>
                                <option value="KRAFT_BLANCO">Kraft Blanco 90gr</option>
                                <option value="PARAFINADO">Papel Parafinado 40gr</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <!-- SECCIÓN 4: IMPRESIÓN -->
                <div class="section">
                    <div class="section-title">
                        <span class="section-icon">🎨</span>
                        Impresión y Acabados
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="num_tintas">Número de Tintas <span class="required">*</span></label>
                            <select id="num_tintas" required>
                                <option value="1">1 tinta</option>
                                <option value="2">2 tintas</option>
                                <option value="3">3 tintas</option>
                                <option value="4">4 tintas (full color)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="urgencia">Tiempo de Entrega <span class="required">*</span></label>
                            <select id="urgencia" required>
                                <option value="normal">Normal - 15 días</option>
                                <option value="urgente">Urgente - 7 días (+50%)</option>
                                <option value="express">Express - 3 días (+100%)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Acabados Adicionales (opcionales)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="plastificado_brillante" name="acabados" value="PLAST_BRILL_EXT">
                                <label for="plastificado_brillante">Plastificado Brillante</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="plastificado_mate" name="acabados" value="PLAST_MATE_EXT">
                                <label for="plastificado_mate">Plastificado Mate</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="estampado_foil" name="acabados" value="ESTAMPADO_FOIL">
                                <label for="estampado_foil">Estampado Foil</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="uv_selectivo" name="acabados" value="UV_SELECTIVO">
                                <label for="uv_selectivo">UV Selectivo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="ventanilla" name="acabados" value="VENTANILLA">
                                <label for="ventanilla">Ventanilla</label>
                            </div>
                            <div class="checkbox-item" id="pegadoCheckbox" style="display: none;">
                                <input type="checkbox" id="pegado_caja" name="acabados" value="PEGADO_CAJA">
                                <label for="pegado_caja">Pegado de Caja</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECCIÓN 5: PAGO -->
                <div class="section">
                    <div class="section-title">
                        <span class="section-icon">💳</span>
                        Pago y Observaciones
                    </div>

                    <div class="form-group">
                        <label for="forma_pago">Forma de Pago <span class="required">*</span></label>
                        <select id="forma_pago" required>
                            <option value="contado">Contado (-2% descuento)</option>
                            <option value="credito_15">Crédito 15 días (50% anticipo)</option>
                            <option value="credito_30">Crédito 30 días (50% anticipo)</option>
                            <option value="cheque">Cheque (100% anticipado)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="observaciones">Observaciones</label>
                        <textarea id="observaciones" placeholder="Información adicional..."></textarea>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    🚀 Generar Cotización Oficial
                </button>
            </form>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p class="loading-text">Generando cotización...</p>
            </div>
        </div>

        <!-- VISTA PREVIA EN VIVO -->
        <div class="preview-container">
            <div class="preview-title">
                📊 Resumen de Cotización
            </div>

            <div class="preview-row">
                <div class="preview-label">Cliente:</div>
                <div class="preview-value" id="prev-cliente">-</div>
            </div>

            <div class="preview-row">
                <div class="preview-label">Producto:</div>
                <div class="preview-value" id="prev-producto">📦 Selecciona un producto</div>
            </div>

            <div class="preview-row">
                <div class="preview-label">Cantidad:</div>
                <div class="preview-value" id="prev-cantidad">- unidades</div>
            </div>

            <div class="preview-row">
                <div class="preview-label">Material:</div>
                <div class="preview-value" id="prev-material">-</div>
            </div>

            <div class="preview-row">
                <div class="preview-label">Entrega:</div>
                <div class="preview-value" id="prev-entrega">Normal - 15 días hábiles ⭐</div>
            </div>

            <div class="price-section">
                <div class="price-label">💰 PRECIO ESTIMADO:</div>
                <div class="price-value" id="prev-precio">Cotización en proceso...</div>
                
                <div class="breakdown">
                    <div class="breakdown-row">
                        <span>Subtotal:</span>
                        <span id="prev-subtotal">$0</span>
                    </div>
                    <div class="breakdown-row">
                        <span>IVA (19%):</span>
                        <span id="prev-iva">$0</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Precio unitario:</span>
                        <span id="prev-unitario">$0</span>
                    </div>
                </div>
            </div>

            <div class="status">
                ✨ Vista previa en tiempo real
            </div>
        </div>
    </div>

    <script>
        // CATÁLOGO COMPLETO - 198 PRODUCTOS
        const CATALOGO_PRODUCTOS = [
    {codigo:"TB0001",medidas:"22 X 12 X 33",tipo:"BOLSA",largo:70,ancho:44,cabida:2,popular:true},
    {codigo:"TB0002",medidas:"40 X 15 X 30",tipo:"BOLSA",largo:84,ancho:57,cabida:1,popular:true},
    {codigo:"TB0003",medidas:"15 X 10 X 40",tipo:"BOLSA",largo:52,ancho:50,cabida:2,popular:true},
    {codigo:"TB0004",medidas:"20 X 12 X 25",tipo:"BOLSA",largo:66,ancho:36,cabida:2,popular:true},
    {codigo:"TB0005",medidas:"22 X 11 X 16",tipo:"BOLSA",largo:67.5,ancho:26,cabida:3,popular:false},
    {codigo:"TB0006",medidas:"16 X 8 X 24",tipo:"BOLSA",largo:49.5,ancho:32.5,cabida:4,popular:false},
    {codigo:"TB0007",medidas:"13 X 13 X 8",tipo:"CAJA_SIN_PEGA",largo:45.5,ancho:29,cabida:4,popular:true},
    {codigo:"TB0008",medidas:"20 X 13 X 7",tipo:"CAJA_SIN_PEGA",largo:43,ancho:35,cabida:4,popular:true},
    {codigo:"TB0009",medidas:"15,5 X 10 X 21",tipo:"CAJA_CON_PEGAS",largo:52.4,ancho:28,cabida:3,pegas:3,popular:true},
    {codigo:"TB0010",medidas:"20 X 12 X 12",tipo:"CAJA_CON_PEGAS",largo:66,ancho:30,cabida:3,pegas:3,popular:true},
    {codigo:"TB0011",medidas:"30 X 22 X 8",tipo:"CAJA_SIN_PEGA",largo:64,ancho:47,cabida:2,popular:false},
    {codigo:"TB0012",medidas:"23 X 15 X 9",tipo:"CAJA_SIN_PEGA",largo:50.2,ancho:42,cabida:2,popular:false},
    {codigo:"TB0013",medidas:"22 X 16 X 4",tipo:"CAJA_SIN_PEGA",largo:42.6,ancho:30,cabida:4,popular:false},
    {codigo:"TB0014",medidas:"24 x 24 x 6",tipo:"CAJA_SIN_PEGA",largo:66.4,ancho:48.4,cabida:2,popular:false},
    {codigo:"TB0015",medidas:"24 x 8 x 7",tipo:"CAJA_SIN_PEGA",largo:38,ancho:33,cabida:4,popular:false},
    {codigo:"TB0016",medidas:"20 x 16 x 7",tipo:"CAJA_SIN_PEGA",largo:48,ancho:34,cabida:4,popular:false},
    {codigo:"TB0017",medidas:"20 x 12,5 x 11",tipo:"CAJA_SIN_PEGA",largo:49,ancho:34,cabida:4,popular:false},
    {codigo:"TB0018",medidas:"22 x 14 x 9",tipo:"CAJA_SIN_PEGA",largo:48.5,ancho:33,cabida:4,popular:false},
    {codigo:"TB0019",medidas:"21 x 8 x 7",tipo:"CAJA_SIN_PEGA",largo:35,ancho:33,cabida:4,popular:false},
    {codigo:"TB0020",medidas:"21 x 7 x 5",tipo:"CAJA_SIN_PEGA",largo:31,ancho:26,cabida:4,popular:false},
    {codigo:"TB0021",medidas:"14,5 x 14 x 8",tipo:"CAJA_SIN_PEGA",largo:46.5,ancho:30.5,cabida:4,popular:false},
    {codigo:"TB0022",medidas:"25 x 25 x 10",tipo:"CAJA_SIN_PEGA",largo:72,ancho:75,cabida:2,popular:false},
    {codigo:"TB0023",medidas:"22 x 12 x 6,5",tipo:"CAJA_SIN_PEGA",largo:46,ancho:35,cabida:4,popular:false},
    {codigo:"TB0024",medidas:"31 x 31 x 12",tipo:"CAJA_CON_PEGAS",largo:110,ancho:50,cabida:1,pegas:1,popular:false},
    {codigo:"TB0025",medidas:"27 X 27 X 12,5",tipo:"CAJA_CON_PEGAS",largo:104,ancho:44,cabida:1,pegas:1,popular:false},
    {codigo:"TB0026",medidas:"17 X 13 X 7",tipo:"CAJA_SIN_PEGA",largo:43,ancho:31,cabida:4,popular:false},
    {codigo:"TB0027",medidas:"20 X 16 X 7",tipo:"CAJA_SIN_PEGA",largo:49,ancho:34,cabida:4,popular:false},
    {codigo:"TB0028",medidas:"25 X 20 X 9",tipo:"CAJA_SIN_PEGA",largo:62,ancho:43,cabida:2,popular:false},
    {codigo:"TB0029",medidas:"14 X 14 X 8",tipo:"CAJA_SIN_PEGA",largo:48,ancho:30,cabida:4,popular:false},
    {codigo:"TB0030",medidas:"11 X 11 X 10",tipo:"CAJA_SIN_PEGA",largo:46,ancho:31,cabida:4,popular:false},
    {codigo:"TB0031",medidas:"14 X 14 X 14",tipo:"CAJA_SIN_PEGA",largo:60,ancho:42,cabida:2,popular:false},
    {codigo:"TB0032",medidas:"20 X 13 X 6",tipo:"CAJA_SIN_PEGA",largo:42,ancho:34,cabida:4,popular:false},
    {codigo:"TB0033",medidas:"17,5 X 8,5 X 5",tipo:"CAJA_SIN_PEGA",largo:38,ancho:31,cabida:4,popular:false},
    {codigo:"TB0034",medidas:"19 X 9 X 6",tipo:"CAJA_SIN_PEGA",largo:52,ancho:43,cabida:2,popular:false},
    {codigo:"TB0035",medidas:"11 X 11 X 4",tipo:"CAJA_SIN_PEGA",largo:34,ancho:37,cabida:6,popular:false},
    {codigo:"TB0036",medidas:"14 X 9 X 9",tipo:"CAJA_SIN_PEGA",largo:38,ancho:32,cabida:4,popular:false},
    {codigo:"TB0037",medidas:"10 X 10",tipo:"CAJA_SIN_PEGA",largo:11,ancho:11,cabida:48,popular:false},
    {codigo:"TB0038",medidas:"18 X 11 X 5",tipo:"CAJA_SIN_PEGA",largo:32,ancho:24,cabida:8,popular:false},
    {codigo:"TB0039",medidas:"20 X 14 X 5",tipo:"CAJA_SIN_PEGA",largo:30,ancho:24,cabida:9,popular:false},
    {codigo:"TB0040",medidas:"19 X 12 X 5",tipo:"CAJA_SIN_PEGA",largo:29,ancho:22,cabida:9,popular:true},
    {codigo:"TB0041",medidas:"14 X 13 X 5",tipo:"CAJA_SIN_PEGA",largo:24,ancho:23,cabida:12,popular:false},
    {codigo:"TB0042",medidas:"11 X 7,5 X 4",tipo:"CAJA_SIN_PEGA",largo:20,ancho:16.5,cabida:8,popular:false},
    {codigo:"TB0043",medidas:"34,7 X 23 X 12",tipo:"CAJA_CON_PEGAS",largo:97,ancho:69,cabida:1,pegas:1,popular:false},
    {codigo:"TB0044",medidas:"18 X 18 X 7",tipo:"CAJA_SIN_PEGA",largo:32,ancho:32,cabida:6,popular:false},
    {codigo:"TB0045",medidas:"15 X 10 x 5",tipo:"CAJA_SIN_PEGA",largo:25.3,ancho:20,cabida:9,popular:false},
    {codigo:"TB0046",medidas:"12 x 11 x 5,5",tipo:"CAJA_SIN_PEGA",largo:35.5,ancho:23,cabida:8,popular:false},
    {codigo:"TB0047",medidas:"10 x 12 x 3",tipo:"CAJA_CON_PEGAS",largo:25,ancho:17,cabida:16,pegas:2,popular:false},
    {codigo:"TB0048",medidas:"21,7 x 20 x 1",tipo:"CAJA_SIN_PEGA",largo:25,ancho:14,cabida:20,popular:false},
    {codigo:"TB0049",medidas:"10 X 8 X 4",tipo:"CAJA_SIN_PEGA",largo:50,ancho:35,cabida:4,popular:false},
    {codigo:"TB0050",medidas:"26 X 8",tipo:"CAJA_SIN_PEGA",largo:21,ancho:19,cabida:9,popular:false},
    {codigo:"TB0051",medidas:"28 X 16",tipo:"CAJA_CON_PEGAS",largo:23.3,ancho:32,cabida:9,pegas:2,popular:false},
    {codigo:"TB0052",medidas:"19 X 10 X 5,5",tipo:"CAJA_SIN_PEGA",largo:44,ancho:33,cabida:4,popular:false},
    {codigo:"TB0053",medidas:"25 x 8,5 x 5",tipo:"CAJA_CON_PEGAS",largo:48,ancho:44,cabida:2,pegas:1,popular:false},
    {codigo:"TB0054",medidas:"12,5 X 8,5 X 5",tipo:"CAJA_CON_PEGAS",largo:48,ancho:32,cabida:4,pegas:1,popular:false},
    {codigo:"TB0055",medidas:"15 X 9 X 15",tipo:"CAJA_SIN_PEGA",largo:53,ancho:15,cabida:6,popular:false},
    {codigo:"TB0056",medidas:"23,5 X 15,5 X 9",tipo:"CAJA_SIN_PEGA",largo:53.7,ancho:41.5,cabida:2,popular:false},
    {codigo:"TB0057",medidas:"17,5 X 17,5 X 11,5",tipo:"CAJA_SIN_PEGA",largo:61.5,ancho:41.5,cabida:2,popular:false},
    {codigo:"TB0058",medidas:"29 X 22 X 10",tipo:"CAJA_SIN_PEGA",largo:69,ancho:48,cabida:2,popular:false},
    {codigo:"TB0059",medidas:"16 X 8 X 9",tipo:"CAJA_SIN_PEGA",largo:37,ancho:34,cabida:4,popular:false},
    {codigo:"TB0060",medidas:"46 X 8,5 X 5",tipo:"CAJA_SIN_PEGA",largo:56,ancho:32,cabida:2,popular:false},
    {codigo:"TB0061",medidas:"10,5 X 8 X 4",tipo:"CAJA_SIN_PEGA",largo:18,ancho:16,cabida:9,popular:false},
    {codigo:"TB0062",medidas:"14 X 8,5 X 38",tipo:"BOLSA",largo:47,ancho:46,cabida:2,popular:false},
    {codigo:"TB0063",medidas:"12 X 4 X 20",tipo:"BOLSA",largo:35.5,ancho:26.5,cabida:2,popular:false},
    {codigo:"TB0064",medidas:"14 X 8,5 X 38",tipo:"CAJA_SIN_PEGA",largo:47,ancho:46,cabida:4,popular:false},
    {codigo:"TB0065",medidas:"22 X 12 X 7,5",tipo:"CAJA_SIN_PEGA",largo:42,ancho:37,cabida:4,popular:false},
    {codigo:"TB0066",medidas:"15,5 x 9 x 3",tipo:"CAJA_SIN_PEGA",largo:27.7,ancho:27,cabida:8,popular:false},
    {codigo:"TB0067",medidas:"22 x 12 x 8,5",tipo:"CAJA_SIN_PEGA",largo:43.5,ancho:33,cabida:4,popular:false},
    {codigo:"TB0068",medidas:"18 x 10 x 2",tipo:"CAJA_SIN_PEGA",largo:26,ancho:26,cabida:6,popular:false},
    {codigo:"TB0069",medidas:"13 X 13 X 8",tipo:"CAJA_SIN_PEGA",largo:45.8,ancho:29,cabida:4,popular:false},
    {codigo:"TB0070",medidas:"20 X 11 X 6,5",tipo:"CAJA_SIN_PEGA",largo:42,ancho:33,cabida:4,popular:false},
    {codigo:"TB0071",medidas:"16 X 15 X 6,5",tipo:"CAJA_SIN_PEGA",largo:45.5,ancho:28,cabida:8,popular:false},
    {codigo:"TB0072",medidas:"12 X 10 X 7,5",tipo:"CAJA_SIN_PEGA",largo:37,ancho:30,cabida:2,popular:false},
    {codigo:"TB0073",medidas:"11,5 X 10 X 5,5",tipo:"CAJA_SIN_PEGA",largo:33,ancho:22.5,cabida:4,popular:false},
    {codigo:"TB0074",medidas:"28 X 15 X 7",tipo:"CAJA_CON_PEGAS",largo:47,ancho:41,cabida:3,pegas:1,popular:false},
    {codigo:"TB0075",medidas:"12,5 X 12,5 X 5,5",tipo:"CAJA_CON_PEGAS",largo:51,ancho:24.5,cabida:4,pegas:1,popular:false},
    {codigo:"TB0076",medidas:"12,5 X 12,5 X 10",tipo:"CAJA_CON_PEGAS",largo:52,ancho:29,cabida:2,pegas:1,popular:false},
    {codigo:"TB0077",medidas:"11 X 9 X 3,5",tipo:"CAJA_CON_PEGAS",largo:35,ancho:50,cabida:4,pegas:2,popular:false},
    {codigo:"TB0078",medidas:"30 X 15 X 7",tipo:"CAJA_SIN_PEGA",largo:60,ancho:48,cabida:2,popular:false},
    {codigo:"TB0079",medidas:"28,8 X 8,5 X 5",tipo:"CAJA_SIN_PEGA",largo:35,ancho:29,cabida:4,popular:false},
    {codigo:"TB0080",medidas:"23 X 15 X 7,5",tipo:"CAJA_SIN_PEGA",largo:48,ancho:38,cabida:2,popular:false},
    {codigo:"TB0081",medidas:"25 X 21,5 X 7",tipo:"CAJA_SIN_PEGA",largo:62,ancho:39,cabida:2,popular:false},
    {codigo:"TB0082",medidas:"15 X 11 X 4",tipo:"CAJA_SIN_PEGA",largo:35,ancho:25,cabida:8,popular:false},
    {codigo:"TB0083",medidas:"15 X 5,5 X 5",tipo:"CAJA_SIN_PEGA",largo:25,ancho:22,cabida:8,popular:false},
    {codigo:"TB0084",medidas:"17 X 14 X 7,5",tipo:"CAJA_SIN_PEGA",largo:64,ancho:32,cabida:2,popular:false},
    {codigo:"TB0085",medidas:"11,5 X 7 X 2,5",tipo:"CAJA_CON_PEGAS",largo:20.5,ancho:19.5,cabida:9,pegas:1,popular:false},
    {codigo:"TB0086",medidas:"22 X 14 X 9",tipo:"CAJA_SIN_PEGA",largo:49,ancho:35,cabida:4,popular:false},
    {codigo:"TB0087",medidas:"24 X 24 X 8",tipo:"CAJA_SIN_PEGA",largo:68,ancho:40,cabida:2,popular:false},
    {codigo:"TB0088",medidas:"32 X 14 X 8,5",tipo:"CAJA_SIN_PEGA",largo:49,ancho:49,cabida:2,popular:false},
    {codigo:"TB0089",medidas:"19 X 19 X 7",tipo:"CAJA_SIN_PEGA",largo:34,ancho:33,cabida:2,popular:false},
    {codigo:"TB0090",medidas:"30 X 22 X 8",tipo:"CAJA_SIN_PEGA",largo:67,ancho:46,cabida:2,popular:false},
    {codigo:"TB0091",medidas:"17,5 X 17,5 X 11,5",tipo:"CAJA_SIN_PEGA",largo:60,ancho:40,cabida:2,popular:false},
    {codigo:"TB0092",medidas:"23 X 15 X 9",tipo:"CAJA_SIN_PEGA",largo:49,ancho:41,cabida:2,popular:false},
    {codigo:"TB0093",medidas:"10 X 5 X 3",tipo:"CAJA_CON_PEGAS",largo:16.8,ancho:16.9,cabida:8,pegas:1,popular:false},
    {codigo:"TB0094",medidas:"19,5 X 12,5 X 7",tipo:"CAJA_SIN_PEGA",largo:33.7,ancho:26.5,cabida:4,popular:false},
    {codigo:"TB0095",medidas:"12 X 12 X 2",tipo:"CAJA_CON_PEGAS",largo:20,ancho:10,cabida:15,pegas:1,popular:false},
    {codigo:"TB0096",medidas:"13 X 13 X 7,5",tipo:"CAJA_SIN_PEGA",largo:44,ancho:28,cabida:4,popular:false},
    {codigo:"TB0097",medidas:"5 X 5 X 2,7",tipo:"CAJA_CON_PEGAS",largo:16.6,ancho:12.5,cabida:16,pegas:1,popular:false},
    {codigo:"TB0098",medidas:"25 X 25 X 12,5",tipo:"CAJA_CON_PEGAS",largo:112,ancho:45,cabida:1,pegas:1,popular:false},
    {codigo:"TB0099",medidas:"15 X 7,5 X 1",tipo:"CAJA_SIN_PEGA",largo:25,ancho:24.5,cabida:8,popular:false},
    {codigo:"TB0100",medidas:"19 X 9 X 5,5",tipo:"CAJA_CON_PEGAS",largo:33,ancho:30,cabida:6,pegas:1,popular:false},
    {codigo:"TB0101",medidas:"14,5 X 14,5",tipo:"CAJA_SIN_PEGA",largo:14.5,ancho:14.5,cabida:30,popular:false},
    {codigo:"TB0102",medidas:"32 X 32 X 20",tipo:"CAJA_CON_PEGAS",largo:111,ancho:72,cabida:1,pegas:2,popular:false},
    {codigo:"TB0103",medidas:"20 X 15 X 2,5",tipo:"CAJA_SIN_PEGA",largo:52,ancho:24,cabida:4,popular:false},
    {codigo:"TB0104",medidas:"12 X 12 X 10",tipo:"CAJA_CON_PEGAS",largo:49.5,ancho:32.5,cabida:4,pegas:1,popular:false},
    {codigo:"TB0105",medidas:"8 X 11",tipo:"CAJA_CON_PEGAS",largo:13.5,ancho:11,cabida:48,pegas:1,popular:false},
    {codigo:"TB0106",medidas:"22 X 17 X 6",tipo:"CAJA_CON_PEGAS",largo:58,ancho:31,cabida:2,pegas:1,popular:false},
    {codigo:"TB0107",medidas:"24 X 24 X 9",tipo:"CAJA_SIN_PEGA",largo:69,ancho:42,cabida:2,popular:false},
    {codigo:"TB0108",medidas:"28 X 28 X 16",tipo:"CAJA_CON_PEGAS",largo:120,ancho:50,cabida:1,pegas:1,popular:false},
    {codigo:"TB0109",medidas:"19,5 X 12,5 X 5,5",tipo:"CAJA_SIN_PEGA",largo:38,ancho:28.5,cabida:4,popular:false},
    {codigo:"TB0110",medidas:"20 X 13 X 7",tipo:"CAJA_SIN_PEGA",largo:44,ancho:35,cabida:4,popular:false},
    {codigo:"TB0111",medidas:"9 X 8 X 4",tipo:"CAJA_SIN_PEGA",largo:24.2,ancho:17.5,cabida:16,popular:false},
    {codigo:"TB0112",medidas:"19,5 X 14 X 7,5",tipo:"CAJA_SIN_PEGA",largo:46,ancho:35,cabida:4,popular:false},
    {codigo:"TB0113",medidas:"22 X 22 X 12",tipo:"CAJA_SIN_PEGA",largo:70,ancho:46,cabida:2,popular:false},
    {codigo:"TB0114",medidas:"20 X 20 X 10",tipo:"CAJA_SIN_PEGA",largo:63.5,ancho:40,cabida:2,popular:false},
    {codigo:"TB0115",medidas:"17 X 17 X 10",tipo:"CAJA_SIN_PEGA",largo:57,ancho:37,cabida:2,popular:false},
    {codigo:"TB0116",medidas:"22 X 22 X 10",tipo:"CAJA_SIN_PEGA",largo:67,ancho:42,cabida:2,popular:false},
    {codigo:"TB0117",medidas:"24 X 16",tipo:"CAJA_SIN_PEGA",largo:24,ancho:16,cabida:16,popular:false},
    {codigo:"TB0118",medidas:"18,5 X 18,5 X 9",tipo:"CAJA_SIN_PEGA",largo:59,ancho:36.5,cabida:2,popular:false},
    {codigo:"TB0119",medidas:"13 X 13 X 8",tipo:"CAJA_SIN_PEGA",largo:44.5,ancho:31,cabida:4,popular:false},
    {codigo:"TB0120",medidas:"30 X 30 X 15",tipo:"CAJA_CON_PEGAS",largo:120,ancho:50,cabida:1,pegas:1,popular:false},
    {codigo:"TB0121",medidas:"17,5 X 9 X 2,8",tipo:"CAJA_SIN_PEGA",largo:25,ancho:30,cabida:8,popular:false},
    {codigo:"TB0122",medidas:"20 X 15 X 6",tipo:"BOLSA",largo:43,ancho:27,cabida:4,popular:false},
    {codigo:"TB0123",medidas:"17 X 8 X 8 X ( 13 )",tipo:"CAJA_CON_PEGAS",largo:52.5,ancho:27,cabida:3,pegas:4,popular:false},
    {codigo:"TB0124",medidas:"32 X 32 X 16,5",tipo:"CAJA_CON_PEGAS",largo:115,ancho:65,cabida:1,pegas:2,popular:false},
    {codigo:"TB0125",medidas:"15 X 9 X 2,3",tipo:"CAJA_SIN_PEGA",largo:25,ancho:25,cabida:8,popular:false},
    {codigo:"TB0126",medidas:"32 X 32 X 20",tipo:"CAJA_CON_PEGAS",largo:110,ancho:72,cabida:1,pegas:2,popular:false},
    {codigo:"TB0127",medidas:"16 X 16",tipo:"CAJA_SIN_PEGA",largo:16,ancho:16,cabida:48,popular:false},
    {codigo:"TB0128",medidas:"22 X 16 X 6",tipo:"CAJA_SIN_PEGA",largo:48,ancho:34,cabida:4,popular:false},
    {codigo:"TB0129",medidas:"25 X 8 X 6",tipo:"CAJA_CON_PEGAS",largo:70,ancho:30,cabida:3,pegas:1,popular:false},
    {codigo:"TB0130",medidas:"19 X 12 X 8",tipo:"CAJA_SIN_PEGA",largo:35,ancho:28.5,cabida:6,popular:false},
    {codigo:"TB0131",medidas:"14 X 12 X 10",tipo:"CAJA_CON_PEGAS",largo:49.5,ancho:31,cabida:4,pegas:3,popular:false},
    {codigo:"TB0132",medidas:"22 X 12 X 12",tipo:"CAJA_CON_PEGAS",largo:69.5,ancho:32,cabida:3,pegas:3,popular:false},
    {codigo:"TB0133",medidas:"21,5 X 20 X 12",tipo:"CAJA_CON_PEGAS",largo:69.5,ancho:43,cabida:2,pegas:3,popular:false},
    {codigo:"TB0134",medidas:"17 X 13 X 12",tipo:"CAJA_CON_PEGAS",largo:60,ancho:31,cabida:3,pegas:3,popular:false},
    {codigo:"TB0135",medidas:"17,3 X 5,5 X 3,8",tipo:"CAJA_SIN_PEGA",largo:21.7,ancho:13,cabida:20,popular:false},
    {codigo:"TB0136",medidas:"14,9 x 11,5 x 4,8",tipo:"CAJA_SIN_PEGA",largo:35,ancho:25,cabida:8,popular:false},
    {codigo:"TB0137",medidas:"30 x 10 x 7",tipo:"CAJA_SIN_PEGA",largo:58.6,ancho:41,cabida:2,popular:false},
    {codigo:"TB0138",medidas:"21 X 12,5 X 11",tipo:"CAJA_SIN_PEGA",largo:49,ancho:35,cabida:4,popular:false},
    {codigo:"TB0139",medidas:"13 X 13 X 10",tipo:"CAJA_SIN_PEGA",largo:33,ancho:25.7,cabida:6,popular:false},
    {codigo:"TB0140",medidas:"12 X 12 X 4",tipo:"CAJA_SIN_PEGA",largo:49,ancho:34,cabida:4,popular:false},
    {codigo:"TB0141",medidas:"12 X 12 X 4",tipo:"BOLSA",largo:34,ancho:18,cabida:12,popular:false},
    {codigo:"TB0142",medidas:"50 X 16,5",tipo:"CAJA_SIN_PEGA",largo:50,ancho:16.5,cabida:8,popular:false},
    {codigo:"TB0143",medidas:"63 X 15",tipo:"CAJA_SIN_PEGA",largo:63,ancho:15,cabida:6,popular:false},
    {codigo:"TB0144",medidas:"18 X 18 X 7",tipo:"CAJA_SIN_PEGA",largo:53.5,ancho:33,cabida:2,popular:false},
    {codigo:"TB0145",medidas:"16 X 11 X 10",tipo:"CAJA_SIN_PEGA",largo:45,ancho:34,cabida:4,popular:false},
    {codigo:"TB0146",medidas:"24 X 24 X 6",tipo:"CAJA_SIN_PEGA",largo:67,ancho:49,cabida:2,popular:false},
    {codigo:"TB0147",medidas:"17 X 14 X 7",tipo:"CAJA_SIN_PEGA",largo:44.5,ancho:31,cabida:4,popular:false},
    {codigo:"TB0148",medidas:"14 X 12 X 6",tipo:"CAJA_SIN_PEGA",largo:39,ancho:26,cabida:4,popular:false},
    {codigo:"TB0149",medidas:"19,5 x 14,5",tipo:"CAJA_CON_PEGAS",largo:31,ancho:25,cabida:8,pegas:3,popular:false},
    {codigo:"TB0150",medidas:"18 X 13",tipo:"CAJA_CON_PEGAS",largo:28,ancho:24,cabida:8,pegas:3,popular:false},
    {codigo:"TB0151",medidas:"15,5 X 9,5 X 2,5",tipo:"CAJA_SIN_PEGA",largo:26.5,ancho:25.5,cabida:6,popular:false},
    {codigo:"TB0152",medidas:"35 X 13",tipo:"CAJA_SIN_PEGA",largo:35,ancho:13,cabida:4,popular:false},
    {codigo:"TB0153",medidas:"23 X 16 X 7",tipo:"CAJA_SIN_PEGA",largo:49,ancho:37,cabida:2,popular:false},
    {codigo:"TB0154",medidas:"17,5 X 13 X 8",tipo:"CAJA_SIN_PEGA",largo:45,ancho:33.5,cabida:4,popular:false},
    {codigo:"TB0155",medidas:"20 X 13 X 11 ,7",tipo:"CAJA_SIN_PEGA",largo:34.6,ancho:31,cabida:6,popular:false},
    {codigo:"TB0156",medidas:"20 X 14 X 5",tipo:"CAJA_SIN_PEGA",largo:41,ancho:31,cabida:4,popular:false},
    {codigo:"TB0157",medidas:"22 X 17 X 5",tipo:"CAJA_SIN_PEGA",largo:46.5,ancho:32,cabida:4,popular:false},
    {codigo:"TB0158",medidas:"33 X 33 X 17",tipo:"BOLSA",largo:104,ancho:47,cabida:1,popular:false},
    {codigo:"TB0159",medidas:"25 X 10 X 3,5",tipo:"CAJA_CON_PEGAS",largo:62,ancho:27,cabida:3,pegas:1,popular:false},
    {codigo:"TB0160",medidas:"25 X 10 X 6",tipo:"CAJA_CON_PEGAS",largo:69,ancho:34,cabida:3,pegas:1,popular:false},
    {codigo:"TB0161",medidas:"28 X 24 X 9",tipo:"CAJA_CON_PEGAS",largo:118,ancho:63,cabida:1,pegas:1,popular:false},
    {codigo:"TB0162",medidas:"8 X 8 X 4",tipo:"CAJA_SIN_PEGA",largo:28,ancho:24.5,cabida:8,popular:false},
    {codigo:"TB0163",medidas:"30 X 30 X 10",tipo:"CAJA_CON_PEGAS",largo:100,ancho:43,cabida:1,pegas:1,popular:false},
    {codigo:"TB0164",medidas:"8 X 8",tipo:"STICKER",largo:8,ancho:8,cabida:94,popular:false},
    {codigo:"TB0165",medidas:"5 X 5",tipo:"STICKER",largo:5,ancho:5,cabida:192,popular:false},
    {codigo:"TB0166",medidas:"3 X 3",tipo:"STICKER",largo:3,ancho:3,cabida:560,popular:false},
    {codigo:"TB0167",medidas:"22 X 22 X 14",tipo:"CAJA_CON_PEGAS",largo:100,ancho:39,cabida:1,pegas:1,popular:false},
    {codigo:"TB0168",medidas:"27 X 27 X 15",tipo:"CAJA_CON_PEGAS",largo:114,ancho:45,cabida:1,pegas:1,popular:false},
    {codigo:"TB0169",medidas:"14 X 14 X 8",tipo:"CAJA_SIN_PEGA",largo:48,ancho:30,cabida:4,popular:false},
    {codigo:"TB0170",medidas:"20 X 10 X 5",tipo:"CAJA_CON_PEGAS",largo:34,ancho:31.5,cabida:6,pegas:1,popular:false},
    {codigo:"TB0171",medidas:"35 X 26 X 8",tipo:"CAJA_SIN_PEGA",largo:152,ancho:70,cabida:1,popular:false},
    {codigo:"TB0172",medidas:"23 X 18 X 6",tipo:"CAJA_SIN_PEGA",largo:85,ancho:64,cabida:1,popular:false},
    {codigo:"TB0173",medidas:"22 X 22 X 10",tipo:"CAJA_SIN_PEGA",largo:67,ancho:42,cabida:2,popular:false},
    {codigo:"TB0174",medidas:"30 X 25,5 X 8",tipo:"CAJA_SIN_PEGA",largo:111.5,ancho:45,cabida:1,popular:false},
    {codigo:"TB0175",medidas:"35 X 35 X 12",tipo:"CAJA_CON_PEGAS",largo:118,ancho:51,cabida:1,pegas:1,popular:false},
    {codigo:"TB0176",medidas:"13 X 13 X 8",tipo:"CAJA_SIN_PEGA",largo:44,ancho:30,cabida:4,popular:false},
    {codigo:"TB0177",medidas:"23 X 15 X 6",tipo:"CAJA_SIN_PEGA",largo:45,ancho:35,cabida:4,popular:false},
    {codigo:"TB0178",medidas:"20 X 13 X 7",tipo:"CAJA_SIN_PEGA",largo:42,ancho:34,cabida:4,popular:false},
    {codigo:"TB0179",medidas:"25 X 25 X 10",tipo:"CAJA_SIN_PEGA",largo:72,ancho:45,cabida:2,popular:false},
    {codigo:"TB0180",medidas:"27 X 27 X 12",tipo:"CAJA_CON_PEGAS",largo:102,ancho:43,cabida:1,pegas:1,popular:false},
    {codigo:"TB0181",medidas:"24 X 24 X 8",tipo:"CAJA_CON_PEGAS",largo:100,ancho:66.7,cabida:1,pegas:1,popular:false},
    {codigo:"TB0182",medidas:"50 X 15 X 10",tipo:"CAJA_CON_PEGAS",largo:132,ancho:38,cabida:1,pegas:3,popular:false},
    {codigo:"TB0183",medidas:"14,5  X 14,5 X 9,5",tipo:"CAJA_SIN_PEGA",largo:50,ancho:33.5,cabida:2,popular:false},
    {codigo:"TB0184",medidas:"19 X 9,5 X 4",tipo:"CAJA_SIN_PEGA",largo:40.5,ancho:36.2,cabida:3,popular:false},
    {codigo:"TB0185",medidas:"23 X 20 X 9",tipo:"CAJA_SIN_PEGA",largo:63,ancho:43,cabida:2,popular:false},
    {codigo:"TB0186",medidas:"18 X 13 X 10",tipo:"CAJA_SIN_PEGA",largo:46,ancho:13,cabida:8,popular:false},
    {codigo:"TB0187",medidas:"23 X 10 X 18",tipo:"CAJA_SIN_PEGA",largo:46,ancho:23,cabida:6,popular:false},
    {codigo:"TB0188",medidas:"17 X 17 X 4",tipo:"CAJA_SIN_PEGA",largo:45,ancho:25,cabida:4,popular:false},
    {codigo:"TB0189",medidas:"28 X 25 X 13",tipo:"BOLSA",largo:86,ancho:36.5,cabida:1,popular:false},
    {codigo:"TB0190",medidas:"25 X 13 X 5",tipo:"CAJA_SIN_PEGA",largo:25,ancho:23,cabida:9,popular:false},
    {codigo:"TB0191",medidas:"23 X 20 X 9",tipo:"CAJA_CON_PEGAS",largo:81,ancho:43,cabida:1,pegas:1,popular:false},
    {codigo:"TB0192",medidas:"26 X 20",tipo:"CAJA_CON_PEGAS",largo:33,ancho:24,cabida:9,pegas:2,popular:false},
    {codigo:"TB0193",medidas:"24 X 14",tipo:"CAJA_CON_PEGAS",largo:33,ancho:24,cabida:9,pegas:2,popular:false},
    {codigo:"TB0194",medidas:"20 X 14 X 5",tipo:"CAJA_SIN_PEGA",largo:23,ancho:15,cabida:18,popular:false},
    {codigo:"TB0195",medidas:"38 X 18 X 15",tipo:"BOLSA",largo:68,ancho:49.25,cabida:2,popular:false},
    {codigo:"TB0196",medidas:"9,5 X 9,5 X 5",tipo:"CAJA_SIN_PEGA",largo:24,ancho:13,cabida:20,popular:false},
    {codigo:"TB0197",medidas:"10 X 10 X 6",tipo:"CAJA_SIN_PEGA",largo:64.5,ancho:36,cabida:2,popular:false},
    {codigo:"TB0198",medidas:"17 X 13 X 7",tipo:"CAJA_SIN_PEGA",largo:54,ancho:31,cabida:4,popular:false}
];

        // MATERIALES CON PRECIOS (del Blueprint)
        const MATERIALES = {
            CART_BLANCO_16: {nombre: "Cartón Blanco Cal.16 (270gr)", precio: 636.8544},
            CART_BLANCO_22: {nombre: "Cartón Blanco Cal.22 (355gr)", precio: 857.304},
            CART_KRAFT_16: {nombre: "Cartón Kraft Cal.16 (285gr)", precio: 901.0764},
            ZENITH_16: {nombre: "ZENITH Cal.16 (270gr)", precio: 1286},
            ZENITH_20_320: {nombre: "ZENITH Cal.20 (320gr)", precio: 1530},
            ZENITH_20_350: {nombre: "ZENITH Cal.20 (350gr)", precio: 1680},
            EARTH_PACK: {nombre: "EARTH PACK NATURAL (315gr)", precio: 950},
            PROPALCOTE_340: {nombre: "PROPALCOTE C2S (340gr)", precio: 420},
            KRAFT_NAT_90: {nombre: "Kraft Natural 90gr", precio: 189},
            KRAFT_BLANCO: {nombre: "Kraft Blanco 90gr", precio: 340.2},
            PARAFINADO: {nombre: "Papel Parafinado 40gr", precio: 224.8722}
        };

        const WEBHOOK_URL = 'https://appn8n-n8n.lx6zon.easypanel.host/webhook/lito-v2';
        let productoSeleccionado = null;

        // ===== FUNCIONES DE CÁLCULO (del Blueprint) =====
        function calcularUnidadesPorPliego(troquel) {
            const o1 = Math.floor(70/troquel.largo) * Math.floor(70/troquel.ancho);
            const o2 = Math.floor(70/troquel.largo) * Math.floor(50/troquel.ancho);
            const o3 = Math.floor(50/troquel.largo) * Math.floor(70/troquel.ancho);
            const o4 = Math.floor(50/troquel.largo) * Math.floor(50/troquel.ancho);
            return Math.max(o1, o2, o3, o4);
        }

        function calcularPrecio(cantidad, troquel, material, numTintas, urgencia) {
            const unidadesPorPliego = calcularUnidadesPorPliego(troquel);
            const pliegosNecesarios = Math.ceil(cantidad / unidadesPorPliego);
            
            const costoMaterial = pliegosNecesarios * material.precio;
            const costoPlancha = (28000 * numTintas) / cantidad * 1000;
            const costoImpresion = 30 * numTintas;
            const costoTroquelado = 40;
            
            const costoPorMillar = (costoMaterial / cantidad * 1000) + costoPlancha + costoImpresion + costoTroquelado;
            
            let margen = 1.35;
            if (cantidad < 500) margen = 1.45;
            if (cantidad >= 5000) margen = 1.30;
            if (cantidad >= 10000) margen = 1.25;
            
            const costoTotal = costoPorMillar * (cantidad/1000);
            let precioVenta = costoTotal * margen;
            
            if (urgencia === 'urgente') precioVenta *= 1.50;
            if (urgencia === 'express') precioVenta *= 2.00;
            
            return {
                unidadesPorPliego,
                pliegosNecesarios,
                precioUnitario: precioVenta / cantidad,
                subtotal: precioVenta,
                iva: precioVenta * 0.19,
                total: precioVenta * 1.19
            };
        }

        function formatPrecio(num) {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0
            }).format(num);
        }

        // ===== ACTUALIZAR VISTA PREVIA =====
        function actualizarPrevia() {
            const clienteTipo = document.getElementById('cliente_tipo').value;
            let cliente = '-';
            if (clienteTipo === 'frecuente') {
                cliente = document.getElementById('cliente_frecuente').value || '-';
            } else if (clienteTipo === 'nuevo') {
                cliente = document.getElementById('cliente_nuevo').value || '-';
            }
            
            const cantidadPred = document.getElementById('cantidad_predefinida').value;
            const cantidad = cantidadPred === 'custom' 
                ? parseInt(document.getElementById('cantidad_custom').value) || 0
                : parseInt(cantidadPred) || 0;
            
            const materialId = document.getElementById('material').value;
            const tintas = parseInt(document.getElementById('num_tintas').value) || 1;
            const urgencia = document.getElementById('urgencia').value;

            document.getElementById('prev-cliente').textContent = cliente;
            
            if (productoSeleccionado) {
                const pegasText = productoSeleccionado.pegas ? ` (${productoSeleccionado.pegas} pegas)` : '';
                document.getElementById('prev-producto').textContent = 
                    `📦 ${productoSeleccionado.tipo} - ${productoSeleccionado.medidas}${pegasText} (${productoSeleccionado.codigo})`;
            }
            
            document.getElementById('prev-cantidad').textContent = 
                cantidad > 0 ? `${cantidad.toLocaleString('es-CO')} unidades` : '- unidades';
            
            if (materialId && MATERIALES[materialId]) {
                document.getElementById('prev-material').textContent = MATERIALES[materialId].nombre;
            }
            
            const entregaTextos = {
                normal: 'Normal - 15 días hábiles ⭐',
                urgente: 'Urgente - 7 días hábiles ⚡ (+50%)',
                express: 'Express - 3 días hábiles 🚀 (+100%)'
            };
            document.getElementById('prev-entrega').textContent = entregaTextos[urgencia] || entregaTextos.normal;

            if (productoSeleccionado && materialId && cantidad > 0) {
                const material = MATERIALES[materialId];
                const resultado = calcularPrecio(cantidad, productoSeleccionado, material, tintas, urgencia);
                
                document.getElementById('prev-precio').textContent = formatPrecio(resultado.total);
                document.getElementById('prev-subtotal').textContent = formatPrecio(resultado.subtotal);
                document.getElementById('prev-iva').textContent = formatPrecio(resultado.iva);
                document.getElementById('prev-unitario').textContent = formatPrecio(resultado.precioUnitario);
            }
        }

        // ===== EVENT LISTENERS PARA FORMULARIO =====
        document.getElementById('cliente_tipo').addEventListener('change', function() {
            const frecuente = document.getElementById('clienteFrecuenteField');
            const nuevo = document.getElementById('clienteNuevoField');
            
            if (this.value === 'frecuente') {
                frecuente.style.display = 'block';
                nuevo.style.display = 'none';
                document.getElementById('cliente_frecuente').required = true;
                document.getElementById('cliente_nuevo').required = false;
            } else if (this.value === 'nuevo') {
                frecuente.style.display = 'none';
                nuevo.style.display = 'block';
                document.getElementById('cliente_frecuente').required = false;
                document.getElementById('cliente_nuevo').required = true;
            }
            actualizarPrevia();
        });

        document.getElementById('tipo_producto').addEventListener('change', function() {
            const tipo = this.value;
            const medidasField = document.getElementById('medidasField');
            const medidasSelect = document.getElementById('medidas');
            const pegadoCheckbox = document.getElementById('pegadoCheckbox');
            const tipoPegasInfo = document.getElementById('tipoPegasInfo');
            
            if (tipo === 'CAJA_CON_PEGAS') {
                tipoPegasInfo.style.display = 'block';
            } else {
                tipoPegasInfo.style.display = 'none';
            }

            if (tipo === 'CAJA_SIN_PEGA') {
                pegadoCheckbox.style.display = 'flex';
            } else {
                pegadoCheckbox.style.display = 'none';
                document.getElementById('pegado_caja').checked = false;
            }
            
            if (!tipo) {
                medidasField.style.display = 'none';
                return;
            }

            const productosFiltrados = CATALOGO_PRODUCTOS.filter(p => p.tipo === tipo);
            medidasSelect.innerHTML = '<option value="">Selecciona medidas</option>';
            
            const populares = productosFiltrados.filter(p => p.popular);
            if (populares.length > 0) {
                const optgroupPop = document.createElement('optgroup');
                optgroupPop.label = '⭐ Más Populares';
                populares.forEach(p => {
                    const opt = document.createElement('option');
                    opt.value = JSON.stringify(p);
                    const pegasText = p.pegas ? ` (${p.pegas} pegas)` : '';
                    opt.textContent = `${p.medidas} (${p.codigo})${pegasText}`;
                    optgroupPop.appendChild(opt);
                });
                medidasSelect.appendChild(optgroupPop);
            }
            
            const normales = productosFiltrados.filter(p => !p.popular);
            if (normales.length > 0) {
                const optgroupNorm = document.createElement('optgroup');
                optgroupNorm.label = `📏 Todas las Medidas (${normales.length})`;
                normales.forEach(p => {
                    const opt = document.createElement('option');
                    opt.value = JSON.stringify(p);
                    const pegasText = p.pegas ? ` (${p.pegas} pegas)` : '';
                    opt.textContent = `${p.medidas} (${p.codigo})${pegasText}`;
                    optgroupNorm.appendChild(opt);
                });
                medidasSelect.appendChild(optgroupNorm);
            }
            
            const optCustom = document.createElement('option');
            optCustom.value = 'custom';
            optCustom.textContent = '✏️ Medida Personalizada';
            medidasSelect.appendChild(optCustom);
            
            medidasSelect.disabled = false;
            medidasField.style.display = 'block';
        });

        document.getElementById('medidas').addEventListener('change', function() {
            const infoDiv = document.getElementById('productoInfo');
            const customField = document.getElementById('medidasCustomField');
            const infoPegasRow = document.getElementById('infoPegasRow');
            
            if (this.value === 'custom') {
                customField.style.display = 'block';
                document.getElementById('medidas_custom').required = true;
                infoDiv.style.display = 'none';
                productoSeleccionado = null;
            } else if (this.value) {
                productoSeleccionado = JSON.parse(this.value);
                customField.style.display = 'none';
                document.getElementById('medidas_custom').required = false;
                
                document.getElementById('info_codigo').textContent = productoSeleccionado.codigo;
                document.getElementById('info_cabida').textContent = productoSeleccionado.cabida + ' unidades';
                
                if (productoSeleccionado.pegas && productoSeleccionado.pegas > 0) {
                    document.getElementById('info_pegas').textContent = productoSeleccionado.pegas + ' pegas';
                    infoPegasRow.style.display = 'flex';
                } else {
                    infoPegasRow.style.display = 'none';
                }
                
                infoDiv.style.display = 'block';
            }
            actualizarPrevia();
        });

        document.getElementById('cantidad_predefinida').addEventListener('change', function() {
            const customField = document.getElementById('cantidadCustomField');
            if (this.value === 'custom') {
                customField.style.display = 'block';
                document.getElementById('cantidad_custom').required = true;
            } else {
                customField.style.display = 'none';
                document.getElementById('cantidad_custom').required = false;
            }
            actualizarPrevia();
        });

        // Event listeners para actualizar previa en tiempo real
        document.getElementById('cliente_frecuente').addEventListener('change', actualizarPrevia);
        document.getElementById('cliente_nuevo').addEventListener('input', actualizarPrevia);
        document.getElementById('cantidad_custom').addEventListener('input', actualizarPrevia);
        document.getElementById('material').addEventListener('change', actualizarPrevia);
        document.getElementById('num_tintas').addEventListener('change', actualizarPrevia);
        document.getElementById('urgencia').addEventListener('change', actualizarPrevia);

        // Envío del formulario
        document.getElementById('cotizacionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = document.getElementById('cotizacionForm');
            const loading = document.getElementById('loading');
            const success = document.getElementById('successMessage');
            const error = document.getElementById('errorBanner');
            
            success.style.display = 'none';
            error.style.display = 'none';
            
            const clienteTipo = document.getElementById('cliente_tipo').value;
            const cliente = clienteTipo === 'frecuente' 
                ? document.getElementById('cliente_frecuente').value 
                : document.getElementById('cliente_nuevo').value;
            
            const cantidadPred = document.getElementById('cantidad_predefinida').value;
            const cantidad = cantidadPred === 'custom' 
                ? parseInt(document.getElementById('cantidad_custom').value) 
                : parseInt(cantidadPred);
            
            let medidas;
            if (productoSeleccionado) {
                medidas = productoSeleccionado.medidas;
            } else {
                medidas = document.getElementById('medidas_custom').value;
            }
            
            const acabados = Array.from(document.querySelectorAll('input[name="acabados"]:checked'))
                .map(cb => cb.value);
            
            const formData = {
                vendedor: document.getElementById('vendedor').value,
                cliente: cliente,
                tipo_producto: document.getElementById('tipo_producto').value,
                medidas: medidas,
                cantidad: cantidad,
                material: document.getElementById('material').value,
                num_tintas: parseInt(document.getElementById('num_tintas').value),
                urgencia: document.getElementById('urgencia').value,
                forma_pago: document.getElementById('forma_pago').value,
                acabados: acabados,
                observaciones: document.getElementById('observaciones').value || 'Ninguna',
                producto: productoSeleccionado
            };
            
            form.style.display = 'none';
            loading.style.display = 'block';
            
            try {
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                if (!response.ok) throw new Error('Error del servidor');
                
                success.style.display = 'block';
                form.reset();
                productoSeleccionado = null;
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
            } catch (err) {
                error.textContent = '❌ Error: ' + err.message;
                error.style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } finally {
                loading.style.display = 'none';
                form.style.display = 'block';
            }
        });

        // Inicializar vista previa
        actualizarPrevia();
    </script>
</body>
</html>